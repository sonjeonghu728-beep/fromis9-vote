<!DOCTYPE html>
<html lang="ko">
<head>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4088294207752316"
     crossorigin="anonymous"></script>

<meta charset="UTF-8">
<title>í”„ë¡œë¯¸ìŠ¤ ë‚˜ì¸ ì¸ê¸°íˆ¬í‘œ</title>
<link rel="icon" href="data:," />

<script src="https://cdn.tailwindcss.com"></script>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-app.js";
import { getFirestore, doc, getDoc, setDoc, updateDoc, increment } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-firestore.js";

const firebaseConfig = {
apiKey: "AIzaSyD3Cg4kCsVXcbZrRetIx-NsiQJAu47qxoA",
authDomain: "fromis9-e2aeb.firebaseapp.com",
projectId: "fromis9-e2aeb",
storageBucket: "fromis9-e2aeb.appspot.com",
messagingSenderId: "45408653741",
appId: "1:45408653741:web:16534371a33a8d70241124"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const members = [
{ id: "ina", name: "ì´ë‚˜ê²½", img: "https://firebasestorage.googleapis.com/v0/b/fromis9-e2aeb.firebasestorage.app/o/%EC%9D%B4%EB%82%98%EA%B2%BD.png.jpg?alt=media&token=1ac591e9-76a6-4c47-9d70-595a13ab4118" },
{ id: "baek", name: "ë°±ì§€í—Œ", img: "https://firebasestorage.googleapis.com/v0/b/fromis9-e2aeb.firebasestorage.app/o/%EB%B0%B1%EC%A7%80%ED%97%8C.png.jpg?alt=media&token=5678e2d1-dd20-4370-8cbd-d2d6572e7397" },
{ id: "chae", name: "ì´ì±„ì˜", img: "https://firebasestorage.googleapis.com/v0/b/fromis9-e2aeb.firebasestorage.app/o/%EC%9D%B4%EC%B1%84%EC%98%81.png.jpg?alt=media&token=7f3f685a-2fcc-46b2-be8d-655157894db6" },
{ id: "park", name: "ë°•ì§€ì›", img: "https://firebasestorage.googleapis.com/v0/b/fromis9-e2aeb.firebasestorage.app/o/%EB%B0%95%EC%A7%80%EC%9B%90.png.jpg?alt=media&token=e8574ba8-7dbb-409a-9ff8-0864d20a7fd6" },
{ id: "song", name: "ì†¡í•˜ì˜", img: "https://firebasestorage.googleapis.com/v0/b/fromis9-e2aeb.firebasestorage.app/o/%EC%86%A1%ED%95%98%EC%98%81.png.jpg?alt=media&token=fb3c48f2-79c6-440b-9485-b92b4ebf3e14" }
];

window.addEventListener('DOMContentLoaded', async () => {
const grid = document.getElementById('memberGrid');

for (const member of members) {
const docRef = doc(db, "votes", member.id);
const docSnap = await getDoc(docRef);

let likes = 0;
if (docSnap.exists()) {
likes = docSnap.data().likes;
} else {
await setDoc(docRef, { likes: 0 });
}

const div = document.createElement('div');
div.classList.add('flex','flex-col','items-center','bg-white','p-4','rounded-2xl','shadow-md','hover:shadow-xl','transition','w-full');

const img = document.createElement('img');
img.src = member.img;
img.alt = member.name;
img.classList.add('rounded-xl','w-40','h-40','object-cover');

const name = document.createElement('p');
name.textContent = member.name;
name.classList.add('mt-3','font-bold','text-lg');

const btn = document.createElement('button');
btn.classList.add('mt-3','px-4','py-2','bg-pink-400','hover:bg-pink-500','text-white','rounded-full','w-full','font-semibold');
btn.textContent = `ì¢‹ì•„ìš” ${likes}`;
btn.addEventListener('click', async () => {
await updateDoc(docRef, { likes: increment(1) });
const updatedSnap = await getDoc(docRef);
btn.textContent = `ì¢‹ì•„ìš” ${updatedSnap.data().likes}`;
});

div.appendChild(img);
div.appendChild(name);
div.appendChild(btn);
grid.appendChild(div);
}
});
</script>
</head>

<body class="bg-gradient-to-b from-pink-50 to-white font-sans">

<div class="max-w-6xl mx-auto px-4 py-12">

<div class="text-center mb-12">
<h1 class="text-4xl font-extrabold mb-4">í”„ë¡œë¯¸ìŠ¤ ë‚˜ì¸ ì¸ê¸°íˆ¬í‘œ ğŸ’—</h1>
<p class="text-gray-600 text-lg mb-2">
ì¢‹ì•„í•˜ëŠ” ë©¤ë²„ì—ê²Œ ì•„ë‚Œì—†ì´ íˆ¬í‘œí•´ì£¼ì„¸ìš”~~!!
</p>
<p class="text-gray-500">
íŒ¬ë“¤ì´ ì§ì ‘ ì°¸ì—¬í•˜ëŠ” ì¸ê¸° íˆ¬í‘œ ì‚¬ì´íŠ¸ì…ë‹ˆë‹¤. ì‘ì›í•˜ëŠ” ë©¤ë²„ì—ê²Œ ì¢‹ì•„ìš”ë¥¼ ëˆŒëŸ¬ ì‘ì›í•´ë³´ì„¸ìš”!
</p>
</div>

<div id="memberGrid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-5 gap-6 justify-items-center"></div>

</div>

</body>
</html>
